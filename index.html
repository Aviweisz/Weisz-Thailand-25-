<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weisz Family - Thailand Itinerary 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0B1120; /* Dark Navy Background */
            color: #E2E8F0; /* Light Gray/White Text */
        }
        
        /* Accordion Styles */
        .day-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
            background-color: #1E293B; /* Slightly lighter navy for content */
            border-radius: 0 0 0.75rem 0.75rem;
        }
        .day-accordion.active .day-content {
            max-height: 2000px; /* Large enough to fit content */
        }
        .day-accordion.active .day-header {
             border-radius: 0.75rem 0.75rem 0 0;
             border-bottom-color: transparent;
        }
        .day-accordion.active .indicator {
            transform: rotate(180deg);
        }
        .day-header {
            transition: all 0.3s ease;
            border: 2px solid #67E8F9;
            box-shadow: 0 0 15px rgba(103, 232, 249, 0.4);
            border-radius: 0.75rem; /* Rounded corners */
            background-color: #0B1120;
        }
        .day-header:hover {
            box-shadow: 0 0 25px rgba(103, 232, 249, 0.6);
        }
        .today-highlight .day-header {
            border-color: #f8fafc;
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-200">

    <!-- Header Section -->
    <header class="bg-slate-900/70 backdrop-blur-lg sticky top-0 z-20 border-b border-slate-700">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex items-center">
                    <svg class="h-8 w-8 text-cyan-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.553L16.5 21.75l-.398-1.197a3.375 3.375 0 00-2.455-2.455L12.75 18l1.197-.398a3.375 3.375 0 002.455-2.455l.398-1.197.398 1.197a3.375 3.375 0 002.455 2.455l1.197.398-1.197.398a3.375 3.375 0 00-2.455 2.455z" />
                    </svg>
                    <h1 class="text-2xl sm:text-3xl font-bold text-slate-100 ml-3">Weisz Family Trip</h1>
                </div>
                <div class="text-right">
                    <p class="text-sm sm:text-base font-medium text-slate-400">Thailand | Aug 4 - 19, 2025</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Dynamic Dashboard -->
    <div id="dynamic-dashboard-container" class="container mx-auto px-4 sm:px-6 lg:px-8 py-4">
        <!-- Content will be injected by JavaScript -->
    </div>

    <!-- Main Itinerary Container -->
    <main class="container mx-auto p-4 sm:p-6 lg:p-8 pt-0">
        <div id="itinerary-container" class="space-y-6">
            <!-- Accordion items will be injected here by JavaScript -->
        </div>
    </main>

    <!-- Footer -->
    <footer class="mt-8 py-6 text-center">
        <p class="text-slate-500 text-sm">Bon Voyage!</p>
        <p class="text-slate-600 text-xs mt-2">Itinerary by Avi Weisz</p>
    </footer>

    <script>
        // --- ITINERARY DATA ---
        const itineraryData = [
            {
                date: "Monday, August 4, 2025",
                location: "Travel Day to Abu Dhabi",
                timeZone: "Asia/Dubai",
                weatherLocation: "Abu Dhabi",
                events: [
                    { type: 'flight', time: '6:50 PM', description: 'Depart on flight #FZTYEI.', details: 'Initial departure.' },
                    { type: 'flight', time: '12:20 AM (Aug 5)', description: 'Land in Abu Dhabi (AUH).', details: 'Layover.' },
                ],
                sleep: { name: 'AUHotel Abu Dhabi - Airport Transit Hotel', details: 'Reservation Details: Confirmation #9064842625990. Check-in: Aug 4 @ 1:00 AM. Checkout: Aug 5 @ 12:00 AM. Guest: Zev Weisz.' }
            },
            {
                date: "Tuesday, August 5, 2025",
                location: "Bangkok",
                timeZone: "Asia/Bangkok",
                weatherLocation: "Bangkok",
                events: [
                    { type: 'flight', time: '9:10 AM', description: 'Depart Abu Dhabi on flight #FZTYEI.', details: 'Connecting flight to Bangkok.' },
                    { type: 'flight', time: '6:50 PM', description: 'Land in Bangkok (BKK).', details: 'Welcome to Thailand!' },
                    { type: 'food', time: 'Evening', description: 'Pickup food from Chabad House Bangkok.', link: 'https://www.google.com/maps/search/?api=1&query=Chabad+House+Bangkok' }
                ],
                sleep: { name: 'Chillax Heritage', details: 'Reservation Details: Confirmation #1128140500202796. Check-in: Aug 5 @ 2:00 PM. Checkout: Aug 7 @ 12:00 PM. Room: Deluxe Double Room. Guest: Zev Weisz.' }
            },
            {
                date: "Wednesday, August 6, 2025",
                location: "Bangkok",
                timeZone: "Asia/Bangkok",
                weatherLocation: "Bangkok",
                events: [
                    { type: 'activity', time: '9:00 AM', description: 'Meet driver outside hotel.', details: 'Driver contact: 66-63-223-9629' },
                    { type: 'activity', time: 'Morning', description: 'Maeklong Railway Market (Train at 11:15 & 11:30).', link: 'https://www.google.com/maps/search/?api=1&query=Maeklong+Railway+Market' },
                    { type: 'activity', time: 'Morning', description: 'Damnoen Saduak Floating Market (Take a boat tour).', link: 'https://www.google.com/maps/search/?api=1&query=Damnoen+Saduak+Floating+Market' },
                    { type: 'activity', time: 'Afternoon', description: 'Visit Sky Bar for amazing views.', link: 'https://www.google.com/maps/search/?api=1&query=Sky+Bar+at+Lebua' },
                    { type: 'activity', time: 'Afternoon', description: 'Take a Tuk Tuk back to the hotel.' },
                    { type: 'food', time: 'Evening', description: 'Supper at Chabad House Bangkok.', link: 'https://www.google.com/maps/search/?api=1&query=Chabad+House+Bangkok' },
                    { type: 'activity', time: 'Evening', description: 'Explore Khao San Road night market.', link: 'https://www.google.com/maps/search/?api=1&query=Khao+San+Road' }
                ],
                sleep: { name: 'Chillax Heritage', details: 'Reservation Details: Confirmation #1128140500202796. Check-in: Aug 5 @ 2:00 PM. Checkout: Aug 7 @ 12:00 PM. Room: Deluxe Double Room. Guest: Zev Weisz.' }
            },
            {
                date: "Thursday, August 7, 2025",
                location: "Bangkok → Chiang Mai",
                timeZone: "Asia/Bangkok",
                weatherLocation: "Chiang Mai",
                events: [
                    { type: 'activity', time: 'Morning', description: 'Explore The Grand Palace.', link: 'https://www.google.com/maps/search/?api=1&query=The+Grand+Palace+Bangkok' },
                    { type: 'activity', time: 'Morning', description: 'Walk through Chinatown.', link: 'https://www.google.com/maps/search/?api=1&query=Chinatown+Bangkok' },
                    { type: 'activity', time: 'Afternoon', description: 'Shopping at CentralWorld Mall.', link: 'https://www.google.com/maps/search/?api=1&query=CentralWorld+Mall+Bangkok' },
                    { type: 'activity', time: 'Afternoon', description: 'Visit ICONSIAM Mall.', link: 'https://www.google.com/maps/search/?api=1&query=ICONSIAM+Mall+Bangkok' },
                    { type: 'flight', time: '9:25 PM', description: 'Flight to Chiang Mai (BKK → CNX)', details: 'Flight Details: Thai VietJet Air - VZ104. Departs: 9:25 PM. Arrives: 10:50 PM. Confirmation: XWS88Y. Capital One Travel: H-Z-E23YZ150Q' },
                    { type: 'flight', time: '10:50 PM', description: 'Land in Chiang Mai.', details: 'Welcome to the north!' }
                ],
                sleep: { name: 'Shangri-La Chiang Mai', details: 'Reservation Details: Hotel Confirmation #2255072172. Trip ID: 1004971831. Check-in: Aug 7 @ 3:00 PM. Check-out: Aug 11 @ 12:00 PM. Room: Deluxe Room, 1 King bed.' }
            },
            {
                date: "Friday, August 8, 2025",
                location: "Chiang Mai",
                timeZone: "Asia/Bangkok",
                weatherLocation: "Chiang Mai",
                events: [
                    { type: 'activity', time: '9:00 AM', description: 'Meet driver outside hotel.' },
                    { type: 'activity', time: 'Morning', description: 'Sticky Waterfall (Buatong).', link: 'https://www.google.com/maps/search/?api=1&query=Bua+Tong+Sticky+Waterfall' },
                    { type: 'activity', time: 'Morning', description: 'Visit Tiger Kingdom.', link: 'https://www.google.com/maps/search/?api=1&query=Tiger+Kingdom+Chiang+Mai' },
                    { type: 'activity', time: 'Morning', description: 'Monkey Show at Karen Village.', link: 'https://www.google.com/maps/search/?api=1&query=Karen+Long+Neck+Village+Chiang+Mai' },
                    { type: 'activity', time: 'Afternoon', description: 'Snake Show at Karen Village.', link: 'https://www.google.com/maps/search/?api=1&query=Karen+Long+Neck+Village+Chiang+Mai' },
                    { type: 'activity', time: 'Afternoon', description: 'Explore Karen Long Neck Village.', link: 'https://www.google.com/maps/search/?api=1&query=Karen+Long+Neck+Village+Chiang+Mai' },
                    { type: 'shabbat', time: '7:10 PM', description: 'Shabbat at Chabad of Chiang Mai.', details: 'Candle lighting at 7:10 PM.', link: 'https://www.google.com/maps/search/?api=1&query=Chabad+of+Chiang+Mai' }
                ],
                sleep: { name: 'Shangri-La Chiang Mai', details: 'Reservation Details: Hotel Confirmation #2255072172. Trip ID: 1004971831. Check-in: Aug 7 @ 3:00 PM. Check-out: Aug 11 @ 12:00 PM. Room: Deluxe Room, 1 King bed.' }
            },
            {
                date: "Saturday, August 9, 2025",
                location: "Chiang Mai",
                timeZone: "Asia/Bangkok",
                weatherLocation: "Chiang Mai",
                events: [
                    { type: 'shabbat', time: 'Day', description: 'Shabbat Rest Day.', details: 'Enjoy a peaceful day.' },
                    { type: 'activity', time: 'Evening', description: 'Explore the Night Bazaar.', link: 'https://www.google.com/maps/search/?api=1&query=Chiang+Mai+Night+Bazaar' },
                    { type: 'activity', time: 'Evening', description: 'Visit the Saturday Night Market.', link: 'https://www.google.com/maps/search/?api=1&query=Saturday+Walking+Street+Chiang+Mai' }
                ],
                sleep: { name: 'Shangri-La Chiang Mai', details: 'Reservation Details: Hotel Confirmation #2255072172. Trip ID: 1004971831. Check-in: Aug 7 @ 3:00 PM. Check-out: Aug 11 @ 12:00 PM. Room: Deluxe Room, 1 King bed.' }
            },
            {
                date: "Sunday, August 10, 2025",
                location: "Chiang Mai",
                timeZone: "Asia/Bangkok",
                weatherLocation: "Chiang Mai",
                events: [
                    { type: 'activity', time: '9:00 AM', description: 'Meet driver outside hotel.' },
                    { type: 'activity', time: 'Morning', description: 'Bamboo Rafting with Panda Tour.', link: 'https://www.google.com/maps/search/?api=1&query=Panda+Tour+Chiang+Mai' },
                    { type: 'activity', time: 'Morning', description: 'White Water Rafting with Siam River Adventures.', link: 'https://www.google.com/maps/search/?api=1&query=Siam+River+Adventures+Chiang+Mai' },
                    { type: 'activity', time: 'Afternoon', description: 'ATV adventure at 8Adventures Camp.', link: 'https://www.google.com/maps/search/?api=1&query=8Adventures+Chiang+Mai' },
                    { type: 'activity', time: 'Afternoon', description: 'Visit an Elephant Sanctuary.' },
                    { type: 'activity', time: 'Evening', description: 'Explore the Sunday Night Market.', link: 'https://www.google.com/maps/search/?api=1&query=Sunday+Walking+Street+Chiang+Mai' }
                ],
                sleep: { name: 'Shangri-La Chiang Mai', details: 'Reservation Details: Hotel Confirmation #2255072172. Trip ID: 1004971831. Check-in: Aug 7 @ 3:00 PM. Check-out: Aug 11 @ 12:00 PM. Room: Deluxe Room, 1 King bed.' }
            },
            {
                date: "Monday, August 11, 2025",
                location: "Chiang Mai → Phuket",
                timeZone: "Asia/Bangkok",
                weatherLocation: "Phuket",
                events: [
                    { type: 'activity', time: 'Morning', description: 'Grand Canyon Water Park (Zipline & Kayak).', link: 'https://www.google.com/maps/search/?api=1&query=Grand+Canyon+Water+Park+Chiang+Mai' },
                    { type: 'activity', time: 'Morning', description: 'Walk around the Old City.', link: 'https://www.google.com/maps/search/?api=1&query=Chiang+Mai+Old+City' },
                    { type: 'flight', time: '6:15 PM', description: 'Flight to Phuket (CNX → HKT)', details: 'Flight Details: Thai AirAsia - FD3158. Departs: 6:15 PM. Arrives: 8:15 PM. Confirmation: S7WT9F. Capital One Travel: H-Z-M2M68WI6G' },
                    { type: 'flight', time: '8:15 PM', description: 'Land in Phuket (HKT).', details: 'Welcome to paradise!' }
                ],
                sleep: { name: 'Zenseana Resort & Spa', details: 'Reservation Details: Hotel Confirmation #779434565. Capital One Travel: H-TXGMCH65FSQ5. Check-in: Aug 11 @ 2:00 PM. Checkout: Aug 12 @ 12:00 PM. Room: Deluxe, Double or Twin, Balcony. Guest: Zev Weisz.' }
            },
            {
                date: "Tuesday, August 12, 2025",
                location: "Phuket → Phi Phi Islands",
                timeZone: "Asia/Bangkok",
                weatherLocation: "Phi Phi Islands",
                events: [
                    { type: 'activity', time: '11:00 AM', description: 'Ferry from Rassada Pier to Phi Phi Island', details: 'Ferry Details: Operator: Chaokoh Travel Center. Booking ID: U40990. Departs: 11:00 AM. Arrives: 1:00 PM. Passengers: Zev Weisz, Esther Tesser. Check-in 30 mins before departure.', link: 'https://www.google.com/maps/search/?api=1&query=Rassada+Pier+Phuket' },
                    { type: 'activity', time: 'Afternoon', description: 'Chill at the resort.' },
                    { type: 'activity', time: 'Evening', description: 'Enjoy a show on the beach.' }
                ],
                sleep: { name: 'Phi Phi Holiday Resort', details: 'Reservation Details: Hotel Confirmation #9080818030810. Capital One Travel: H-8LKJVKBDQV6V. Check-in: Aug 12 @ 3:00 PM. Checkout: Aug 13 @ 11:30 AM. Guest: Zev Weisz.' }
            },
            {
                date: "Wednesday, August 13, 2025",
                location: "Phi Phi Islands → Phuket",
                timeZone: "Asia/Bangkok",
                weatherLocation: "Phuket",
                events: [
                    { type: 'activity', time: '8:30 AM', description: 'Private long tail boat tour', details: 'Trip Details: Operator: Gosafe Transport. Booking ID: 12GO21898144. Departs: 5:00 PM. Arrives: 6:00 PM. Passengers: Zev Weisz, Esther Tesser. Check-in 45 mins before departure.' },
                    { type: 'activity', time: 'Morning', description: 'Visit Maya Bay.', link: 'https://www.google.com/maps/search/?api=1&query=Maya+Bay+Koh+Phi+Phi' },
                    { type: 'activity', time: 'Morning', description: 'See monkeys on Monkey Beach.', link: 'https://www.google.com/maps/search/?api=1&query=Monkey+Beach+Koh+Phi+Phi' },
                    { type: 'activity', time: 'Morning', description: 'Swim in Pi Leh Lagoon.', link: 'https://www.google.com/maps/search/?api=1&query=Pi+Leh+Lagoon+Koh+Phi+Phi' },
                    { type: 'activity', time: '5:00 PM', description: 'Boat back to Phuket (Rassada Pier).', link: 'https://www.google.com/maps/search/?api=1&query=Rassada+Pier+Phuket' },
                    { type: 'food', time: 'Evening', description: 'Supper at Chabad House Phuket.', link: 'https://www.google.com/maps/search/?api=1&query=Chabad+House+Phuket' },
                    { type: 'activity', time: 'Evening', description: 'Explore Patong Beach Road night market.', link: 'https://www.google.com/maps/search/?api=1&query=Patong+Beach+Road' }
                ],
                sleep: { name: 'Phuket Graceland Resort And Spa', details: 'Reservation Details: Hotel Confirmation #321-10054495. Check-in: Aug 13 @ 3:00 PM. Checkout: Aug 15 @ 12:00 PM. Room: Standard Room, 1 or 2 Queen Beds. Guest: Zev Weisz.' }
            },
            {
                date: "Thursday, August 14, 2025",
                location: "Phuket",
                timeZone: "Asia/Bangkok",
                weatherLocation: "Phuket",
                events: [
                    { type: 'activity', time: '10:00 AM', description: 'Elephant Swims at Lucky Beach.', link: 'https://www.google.com/maps/search/?api=1&query=Lucky+Beach+Phuket' },
                    { type: 'activity', time: 'Morning', description: 'Visit Monkey Hill Viewpoint.', link: 'https://www.google.com/maps/search/?api=1&query=Monkey+Hill+Viewpoint+Phuket' },
                    { type: 'activity', time: 'Afternoon', description: 'Rent tuk tuks and explore viewpoints.' },
                    { type: 'activity', time: 'Evening', description: 'Experience Bangla Road night market.', link: 'https://www.google.com/maps/search/?api=1&query=Bangla+Road+Phuket' },
                    { type: 'food', time: 'Evening', description: 'Supper at Chabad House Phuket.', link: 'https://www.google.com/maps/search/?api=1&query=Chabad+House+Phuket' },
                    { type: 'activity', time: 'Evening', description: 'See the Phuket FantaSea show.', link: 'https://www.google.com/maps/search/?api=1&query=Phuket+FantaSea' }
                ],
                sleep: { name: 'Phuket Graceland Resort And Spa', details: 'Reservation Details: Hotel Confirmation #321-10054495. Check-in: Aug 13 @ 3:00 PM. Checkout: Aug 15 @ 12:00 PM. Room: Standard Room, 1 or 2 Queen Beds. Guest: Zev Weisz.' }
            },
            {
                date: "Friday, August 15, 2025",
                location: "Phuket",
                timeZone: "Asia/Bangkok",
                weatherLocation: "Phuket",
                events: [
                    { type: 'activity', time: 'Morning', description: 'Explore Old Phuket Town.', link: 'https://www.google.com/maps/search/?api=1&query=Old+Phuket+Town' },
                    { type: 'activity', time: 'Morning', description: 'Visit Rawai Beach.', link: 'https://www.google.com/maps/search/?api=1&query=Rawai+Beach+Phuket' },
                    { type: 'activity', time: 'Afternoon', description: 'Shop at Jungceylon Mall.', link: 'https://www.google.com/maps/search/?api=1&query=Jungceylon+Mall+Phuket' },
                    { type: 'shabbat', time: 'Evening', description: 'Shabbat at Chabad of Phuket.', link: 'https://www.google.com/maps/search/?api=1&query=Chabad+House+Phuket' }
                ],
                sleep: { name: 'Phuket Graceland Resort And Spa', details: 'Reservation Details: Hotel Confirmation #321-10054495. Check-in: Aug 13 @ 3:00 PM. Checkout: Aug 15 @ 12:00 PM. Room: Standard Room, 1 or 2 Queen Beds. Guest: Zev Weisz.' }
            },
            {
                date: "Saturday, August 16, 2025",
                location: "Phuket",
                timeZone: "Asia/Bangkok",
                weatherLocation: "Phuket",
                events: [
                    { type: 'shabbat', time: 'Day', description: 'Shabbat Rest Day.', details: 'Enjoy the resort facilities or relax on the beach.' }
                ],
                sleep: { name: 'Phuket Graceland Resort And Spa', details: 'Reservation Details: Hotel Confirmation #321-10054495. Check-in: Aug 13 @ 3:00 PM. Checkout: Aug 15 @ 12:00 PM. Room: Standard Room, 1 or 2 Queen Beds. Guest: Zev Weisz.' }
            },
            {
                date: "Sunday, August 17, 2025",
                location: "Phuket",
                timeZone: "Asia/Bangkok",
                weatherLocation: "Phuket",
                events: [
                    { type: 'activity', time: 'Morning', description: 'Move to SALA Phuket Mai Khao Beach Resort.', details: 'Confirmation: 25807673' },
                    { type: 'activity', time: 'Morning', description: 'Chill at the resort\'s private pool.' },
                    { type: 'activity', time: '7:00 PM', description: 'Photographer at the resort.', details: 'Contact: 66-84-844-8415' },
                    { type: 'food', time: 'Evening', description: 'Dinner at Chabad House Phuket.', link: 'https://www.google.com/maps/search/?api=1&query=Chabad+House+Phuket' },
                    { type: 'activity', time: 'Evening', description: 'Watch a fire show at the bar.' }
                ],
                sleep: { name: 'SALA Phuket Mai Khao Beach Resort', details: 'Confirmation: 25807673' }
            },
            {
                date: "Monday, August 18, 2025",
                location: "Phuket",
                timeZone: "Asia/Bangkok",
                weatherLocation: "Phuket",
                events: [
                    { type: 'activity', time: 'Morning', description: 'Relax at the beach & pool.' },
                    { type: 'activity', time: 'Afternoon', description: 'Banana boating & water sports with KBA Watersport.' }
                ],
                sleep: { name: 'SALA Phuket Mai Khao Beach Resort', details: 'Confirmation: 25807673. Enjoy your last full day!' }
            },
            {
                date: "Tuesday, August 19, 2025",
                location: "Departure Day",
                timeZone: "Asia/Singapore",
                weatherLocation: "Singapore",
                events: [
                    { type: 'flight', time: '9:40 AM', description: 'Depart from Phuket (HKT) to Singapore (SIN).', details: 'Flight #TR659. Safe travels home!' }
                ],
                sleep: { name: 'Traveling Home', details: '' }
            }
        ];

        // --- ICONS SVG MAP ---
        const icons = {
            flight: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" /></svg>`,
            hotel: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21" /></svg>`,
            activity: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`,
            food: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>`,
            shabbat: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" /></svg>`
        };

        function toggleDetails(id) {
            const element = document.getElementById(id);
            if (element) {
                element.classList.toggle('hidden');
            }
        }

        function initializeDynamicDashboard() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            let currentDayData = itineraryData.find(day => {
                const dayDate = new Date(day.date);
                dayDate.setHours(0, 0, 0, 0);
                return dayDate.getTime() === today.getTime();
            });
            
            let isBeforeTrip = false;
            if (!currentDayData) {
                const firstDay = new Date(itineraryData[0].date);
                firstDay.setHours(0,0,0,0);
                if (today < firstDay) {
                    isBeforeTrip = true;
                }
                currentDayData = itineraryData[0];
            }


            const container = document.getElementById('dynamic-dashboard-container');
            if (!container || !currentDayData) return;

            const countdownHtml = `
                <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700 text-center">
                    <p class="text-sm text-cyan-400 font-semibold">COUNTDOWN TO DEPARTURE</p>
                    <div id="countdown-timer" class="text-xl font-bold text-slate-100 mt-1"></div>
                </div>
            `;

            const dashboardHtml = `
                <div class="bg-slate-800/50 p-4 rounded-lg border border-slate-700 flex flex-col sm:flex-row justify-between items-center gap-4">
                    <div>
                        <p class="text-sm text-cyan-400 font-semibold">CURRENT LOCATION</p>
                        <p class="text-lg font-bold text-slate-100">${currentDayData.location}</p>
                    </div>
                    <div class="flex items-center space-x-6">
                        <div class="text-center">
                            <p class="text-xs text-cyan-400 font-semibold">LOCAL TIME</p>
                            <p id="local-time" class="text-xl font-bold text-slate-100" data-timezone="${currentDayData.timeZone}">--:-- --</p>
                        </div>
                        <a href="https://www.google.com/search?q=weather+in+${currentDayData.weatherLocation}" target="_blank" class="text-center hover:text-cyan-300 transition-colors">
                            <p class="text-xs text-cyan-400 font-semibold">WEATHER</p>
                            <p class="text-xl font-bold text-slate-100 underline">View Forecast</p>
                        </a>
                    </div>
                </div>
            `;

            container.innerHTML = isBeforeTrip ? countdownHtml : dashboardHtml;

            function updateClock() {
                const timeEl = document.getElementById('local-time');
                if (timeEl) {
                    const tz = timeEl.dataset.timezone;
                    try {
                        const time = new Date().toLocaleTimeString('en-US', {
                            timeZone: tz,
                            hour: '2-digit',
                            minute: '2-digit',
                            hour12: true
                        });
                        timeEl.textContent = time;
                    } catch (e) {
                        timeEl.textContent = "N/A";
                    }
                }
            }
            
            function updateCountdown() {
                const timerEl = document.getElementById('countdown-timer');
                if (timerEl) {
                    const countDownDate = new Date("Aug 4, 2025 18:50:00").getTime();
                    const now = new Date().getTime();
                    const distance = countDownDate - now;

                    if (distance < 0) {
                        timerEl.innerHTML = "Have a great trip!";
                        return;
                    }

                    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                    timerEl.innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
                }
            }

            if(isBeforeTrip) {
                updateCountdown();
                setInterval(updateCountdown, 1000);
            } else {
                updateClock();
                setInterval(updateClock, 1000);
            }
        }

        // --- DYNAMIC HTML GENERATION ---
        const container = document.getElementById('itinerary-container');

        itineraryData.forEach((day, dayIndex) => {
            const accordionDiv = document.createElement('div');
            accordionDiv.className = 'day-accordion';
            accordionDiv.id = `day-accordion-${dayIndex}`;

            const headerButton = document.createElement('button');
            headerButton.className = 'day-header w-full p-5 text-left flex justify-between items-center focus:outline-none';
            headerButton.innerHTML = `
                <div class="flex-grow">
                    <h2 class="text-lg font-bold text-slate-100">${day.date}</h2>
                    <p class="text-sm font-medium text-cyan-400">${day.location}</p>
                </div>
                <svg class="indicator w-5 h-5 text-cyan-400 transform transition-transform duration-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" /></svg>
            `;

            const contentDiv = document.createElement('div');
            contentDiv.className = 'day-content';

            const eventsHtml = day.events.map((event, eventIndex) => {
                let descriptionHtml;
                if (event.link) {
                    descriptionHtml = `<a href="${event.link}" target="_blank" class="font-semibold text-cyan-400 underline hover:text-cyan-300 transition-colors duration-200">${event.description}</a>`;
                } else {
                    descriptionHtml = `<p class="font-semibold text-slate-200">${event.description}</p>`;
                }

                let detailsHtml = `<p class="text-sm text-slate-400 mt-1">${event.time}</p>`;
                const detailsId = `details-${dayIndex}-${eventIndex}`;

                if (event.details && (event.details.startsWith('Flight Details:') || event.details.startsWith('Ferry Details:') || event.details.startsWith('Trip Details:'))) {
                    let detailsType;
                    if (event.details.startsWith('Flight Details:')) detailsType = 'Flight';
                    else if (event.details.startsWith('Ferry Details:')) detailsType = 'Ferry';
                    else detailsType = 'Trip';

                    const detailsContent = event.details.substring(`${detailsType} Details:`.length).trim().replace(/\. /g, '.<br>');
                    detailsHtml = `
                        <p class="text-sm text-slate-400 mt-1">${event.time}</p>
                        <button onclick="toggleDetails('${detailsId}')" class="text-sm text-cyan-400 underline mt-1 cursor-pointer hover:text-cyan-300">
                            View ${detailsType} Details
                        </button>
                        <div id="${detailsId}" class="hidden mt-2 text-sm text-slate-300 bg-slate-800 p-3 rounded-md border border-slate-700">
                            ${detailsContent}
                        </div>
                    `;
                } else if (event.details) {
                     detailsHtml = `<p class="text-sm text-slate-400 mt-1">${event.time} &middot; ${event.details}</p>`;
                }
                
                return `
                    <div class="flex items-start space-x-4 py-4">
                        <div class="flex-shrink-0 w-12 text-center text-slate-400">${icons[event.type]}</div>
                        <div class="flex-grow">
                            ${descriptionHtml}
                            ${detailsHtml}
                        </div>
                    </div>
                `;
            }).join('');

            const sleep = day.sleep;
            let sleepHtml;

            if (sleep.details && sleep.details.startsWith('Reservation Details:')) {
                const detailsId = `details-sleep-${dayIndex}`;
                const detailsContent = sleep.details.substring('Reservation Details:'.length).trim().replace(/\. /g, '.<br>');
                
                sleepHtml = `
                    <div class="flex items-start space-x-4 py-4">
                        <div class="flex-shrink-0 w-12 text-center text-slate-400">${icons.hotel}</div>
                        <div class="flex-grow">
                            <p class="font-semibold text-slate-200">${sleep.name}</p>
                            <button onclick="toggleDetails('${detailsId}')" class="text-sm text-cyan-400 underline mt-1 cursor-pointer hover:text-cyan-300">
                                View Reservation Details
                            </button>
                            <div id="${detailsId}" class="hidden mt-2 text-sm text-slate-300 bg-slate-800 p-3 rounded-md border border-slate-700">
                                ${detailsContent}
                            </div>
                        </div>
                    </div>
                `;
            } else {
                sleepHtml = `
                    <div class="flex items-start space-x-4 py-4">
                        <div class="flex-shrink-0 w-12 text-center text-slate-400">${icons.hotel}</div>
                        <div class="flex-grow">
                            <p class="font-semibold text-slate-200">${sleep.name}</p>
                            <p class="text-sm text-slate-400 mt-1">${sleep.details}</p>
                        </div>
                    </div>
                `;
            }

            contentDiv.innerHTML = `
                <div class="px-5 divide-y divide-slate-700">
                    ${eventsHtml}
                    ${sleep.name !== 'Traveling Home' ? sleepHtml : ''}
                </div>
            `;

            headerButton.addEventListener('click', () => {
                accordionDiv.classList.toggle('active');
            });

            accordionDiv.appendChild(headerButton);
            accordionDiv.appendChild(contentDiv);
            container.appendChild(accordionDiv);
        });

        function highlightCurrentDay() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            itineraryData.forEach((day, index) => {
                const dayDate = new Date(day.date);
                dayDate.setHours(0, 0, 0, 0);

                if (dayDate.getTime() === today.getTime()) {
                    const accordionEl = document.getElementById(`day-accordion-${index}`);
                    if (accordionEl) {
                        accordionEl.classList.add('active', 'today-highlight');
                    }
                }
            });
        }

        // Initialize features
        initializeDynamicDashboard();
        highlightCurrentDay();
    </script>
</body>
</html>
